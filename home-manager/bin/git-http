#!/usr/bin/env bash

git-http() {
  local remote
  remote="$(git remote -v | grep origin | grep fetch | awk '{print $2}')"
  if [ -z "$remote" ]; then
    echo "No remote registered, can't browse."
    return 1
  elif [[ $remote == http://* || $remote = https://* ]]; then
    echo "$remote"
  elif [[ $remote == ssh://git@codeberg.org/* ]]; then # ssh://git@codeberg.org/owner/repo.git
    echo "https://codeberg.org/${remote#ssh://git@codeberg.org/}"
  elif [[ $remote == git@gitlab.com:* ]]; then # git@gitlab.com:owner/repo.git
    echo "https://gitlab.com/${remote#git@gitlab.com:}"
  elif [[ $remote == git@github.com:* ]]; then # git@github.com:owner/repo.git
    echo "https://github.com/${remote#git@github.com:}"
  else
    echo "Unknown remote: $remote."
    return 1
  fi
}
git-http "$@"
